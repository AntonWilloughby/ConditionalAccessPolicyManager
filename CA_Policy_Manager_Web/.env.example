# CA Policy Manager - Environment Configuration Template
# =======================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to git - it's in .gitignore
# =======================================================================

# Demo Mode - Set to true to run without Azure credentials (UI testing only)
# When enabled, authentication features will be disabled
#DEMO_MODE=false

# Flask Configuration
# Generate SECRET_KEY with: python -c "import secrets; print(secrets.token_hex(32))"
# REQUIRED: Must be set in all environments
SECRET_KEY=your_random_secret_key_here_generate_new_one

# Azure AD (Entra ID) Configuration
# Get from Azure Portal → App Registrations → Your App
# REQUIRED (unless DEMO_MODE=true): Must be set for authentication
MSAL_CLIENT_ID=your_app_registration_client_id_here
# REQUIRED (unless DEMO_MODE=true): Must be set for authentication
MSAL_CLIENT_SECRET=your_app_registration_client_secret_here
# Optional: Defaults to organizations multi-tenant
MSAL_AUTHORITY=https://login.microsoftonline.com/organizations

# Environment & Deployment
FLASK_ENV=development  # Set to 'production' for Azure App Service
PORT=5000
HOST=0.0.0.0

# File Upload Configuration
UPLOAD_FOLDER=data/uploads

# SSL Verification
# Default: true (secure)
# Set to 'false' ONLY for development with corporate proxies
# In production, use corporate CA bundle instead
# VERIFY_SSL=true

# =======================================================================
# AI Configuration (Optional - for AI Policy Explainer feature)
# =======================================================================

# Enable AI features (default: false)
AI_ENABLED=false

# AI Provider (options: azure, openai, local)
AI_PROVIDER=azure

# Azure OpenAI (Recommended for enterprise)
# Get from Azure Portal → Azure OpenAI Service → Keys and Endpoint
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Alternative: OpenAI (if not using Azure)
# Get from https://platform.openai.com/account/api-keys
# OPENAI_API_KEY=sk-your_openai_key_here
# OPENAI_MODEL=gpt-4o-mini

# Alternative: Local Model with Ollama (for air-gapped environments)
# Requires Ollama service running: https://ollama.ai
# LOCAL_MODEL=phi3

# =======================================================================
# Production Configuration (Azure App Service / Redis)
# =======================================================================

# Redis URL for session storage (production only)
# Format: redis://username:password@host:port/database
# Example: redis://:password@myredis.redis.cache.windows.net:6380?ssl=True
# REDIS_URL=redis://localhost:6379/0

# =======================================================================
# Development Features (NOT for production)
# =======================================================================

# Enable CSRF protection in development (default: false for easier testing)
# Set to 'true' to test CSRF protection
# ENABLE_CSRF=false

# =======================================================================
# SECURITY REMINDERS
# =======================================================================
# 1. NEVER commit this file with real secrets to git
# 2. .env is in .gitignore - always use local copies for sensitive data
# 3. In Azure: Use App Service Configuration → Application Settings
# 4. In Azure: Use App Service Configuration → Application secrets for secrets
# 5. Generate new SECRET_KEY for each production environment
# 6. Rotate MSAL_CLIENT_SECRET regularly
# 7. Always use HTTPS in production (enforce with PREFERRED_URL_SCHEME=https)
# =======================================================================
